YUI.add("hermes-template-basic-closeable-header",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){return'\t\t<a role="button" class="close-x-button">\n\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var r,s,o=null!=l?l:e.nullContext||{},i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<header class="basic-closeable-header">\n\t<h4>'+e.escapeExpression("function"==typeof(s=null!=(s=i(n,"title")||(null!=l?i(l,"title"):l))?s:e.hooks.helperMissing)?s.call(o,{name:"title",hash:{},data:t,loc:{start:{line:6,column:5},end:{line:6,column:14}}}):s)+"</h4>\n"+(null!=(r=i(n,"if").call(o,null!=l?i(l,"showCloseXButton"):l,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:7,column:1},end:{line:11,column:8}}}))?r:"")+"</header>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/basic-closeable-header",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("basic-closeable-header-view",(function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("isActiveViewAgnostic",!0),e.title=void 0!==e.title?e.title:"",e.showCloseXButton=void 0===e.showCloseXButton||e.showCloseXButton,this.onClose=void 0!==e.onClose?e.onClose:async e=>{},this.params=e,this},loadState:function(){return Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("basic-closeable-header",this.params),this},activate:function(){let e=this.get("container");this.closeXButton=e.one("header .close-x-button"),this.closeXButton&&this.registerEventHandler(this.closeXButton.on("click",this.handleCloseClick.bind(this)))},handleCloseClick:function(e){this.onClose(e)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-basic-closeable-header"],langBundles:["common"]});YUI.add("hermes-template-photostream-filters-list",(function(e,t){var l=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,l,a,n){var o=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,s=e.escapeExpression,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n"+s((i(l,"outlet")||t&&i(t,"outlet")||r).call(o,null!=t?i(t,"basic-closeable-header-view"):t,{name:"outlet",hash:{},data:n,loc:{start:{line:2,column:0},end:{line:2,column:38}}}))+'\n\n<div class="list-container">\n\t'+s((i(l,"outlet")||t&&i(t,"outlet")||r).call(o,null!=t?i(t,"photostream-filter-tools-view"):t,{name:"outlet",hash:{},data:n,loc:{start:{line:5,column:1},end:{line:5,column:41}}}))+"\n</div>\n\n"+s((i(l,"outlet")||t&&i(t,"outlet")||r).call(o,null!=t?i(t,"basic-confirm-actions-view"):t,{name:"outlet",hash:{},data:n,loc:{start:{line:8,column:0},end:{line:8,column:37}}}))+"\n"},useData:!0}),a={};e.Array.each([],(function(t){var l=e.Template.get("hermes/"+t);l&&(a[t]=l)})),e.Template.register("hermes/photostream-filters-list",(function(t,n){return(n=n||{}).partials=n.partials?e.merge(a,n.partials):a,l(t,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photostream-filters-list-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("isActiveViewAgnostic",!0),this.nsid=e.nsid,this.filterOrSortValueUpdated=!1,this.subviewConfig["basic-closeable-header-view"]=Object.assign(this.subviewConfig["basic-closeable-header-view"],{title:this.intlMessage({intlName:"filter-bar.SORT_AND_FILTER"}),onClose:this.handleCloseClick.bind(this)}),this.subviewConfig["basic-confirm-actions-view"]=Object.assign(this.subviewConfig["basic-confirm-actions-view"],{onConfirm:this.handleConfirm.bind(this),showCancelButton:!1,confirmButtonText:this.intlMessage({intlName:"common.DONE"})}),this},subviewConfig:{"basic-closeable-header-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"photostream-filter-tools-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"basic-confirm-actions-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1}},loadState:function(){return Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("photostream-filters-list",{}),this},handleCloseClick:function(e){this.fire("readyToClose")},handleConfirm:function(e,i){this.filterOrSortValueUpdated?(i.setButtonState({confirm:"loading"}),this.appContext.flapp.navigate(window.location.href)):this.fire("readyToClose")},onSubviewEvent:function(e,i){"photostream:filter"===i[0]&&(this.filterOrSortValueUpdated=!0)}})}),"@VERSION@",{requires:["flickr-view","basic-closeable-header-view","photostream-filter-tools-view","basic-confirm-actions-view","hermes-template-photostream-filters-list"],langBundles:["common","filter-bar"]});YUI.add("hermes-template-fluid-magic-tools",(function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<a role="button" class="sort-and-filter-button">'+n.escapeExpression((o(t,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"filter-bar.SORT_AND_FILTER"},data:a,loc:{start:{line:4,column:51},end:{line:4,column:104}}}))+"</a>\n"},3:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t"+n.escapeExpression((o(t,"outlet")||l&&o(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?o(l,"photostream-filter-tools-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:6,column:3},end:{line:6,column:43}}}))+"\n"},5:function(n,l,t,e,a){var o=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,s=n.escapeExpression,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<a class="organize-link hide-if-touch-only" href="/photos/organize" title="'+s((r(t,"intlMessage")||l&&r(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ORGANIZE"},data:a,loc:{start:{line:12,column:78},end:{line:12,column:120}}}))+'">\n\t\t\t\t'+s((r(t,"intlMessage")||l&&r(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ORGANIZE"},data:a,loc:{start:{line:13,column:4},end:{line:13,column:46}}}))+"\n\t\t\t</a>\n"},7:function(n,l,t,e,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t<div class="share-link">\n\t\t\t'+n.escapeExpression((o(t,"outlet")||l&&o(l,"outlet")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},null!=l?o(l,"shareView"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:20,column:3},end:{line:20,column:23}}}))+"\n\t\t</div>\n"},9:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<div class="divider"></div>\n\t\t\t<a role="button" class="layout-button justified'+(null!=(o=(u(t,"ifCond")||l&&u(l,"ifCond")||s).call(i,null!=l?u(l,"layoutPref"):l,"===","justified",{name:"ifCond",hash:{},fn:n.program(10,a,0),inverse:n.noop,data:a,loc:{start:{line:26,column:50},end:{line:26,column:110}}}))?o:"")+'" title="'+r((u(t,"intlMessage")||l&&u(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.JUSTIFIED_VIEW"},data:a,loc:{start:{line:26,column:119},end:{line:26,column:168}}}))+'">\n\t\t\t\t<svg class="icon icon-thumbnail_justified"><use xlink:href="#icon-thumbnail_justified"></use></svg>\n\t\t\t</a>\n\t\t\t<a role="button" class="layout-button card'+(null!=(o=(u(t,"ifCond")||l&&u(l,"ifCond")||s).call(i,null!=l?u(l,"layoutPref"):l,"===","card",{name:"ifCond",hash:{},fn:n.program(10,a,0),inverse:n.noop,data:a,loc:{start:{line:29,column:45},end:{line:29,column:100}}}))?o:"")+'" title="'+r((u(t,"intlMessage")||l&&u(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.TILE_VIEW"},data:a,loc:{start:{line:29,column:109},end:{line:29,column:153}}}))+'">\n\t\t\t\t<svg class="icon icon-thumbnail_card"><use xlink:href="#icon-thumbnail_card"></use></svg>\n\t\t\t</a>\n'},10:function(n,l,t,e,a){return" selected"},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="fluid-centered fluid-magic-toolbar">\n\t<div class="primary-tools-container">\n'+(null!=(o=u(t,"if").call(i,null!=l?u(l,"showSortAndFilterLink"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.program(3,a,0),data:a,loc:{start:{line:3,column:2},end:{line:7,column:9}}}))?o:"")+'\t</div>\n\n\t<div class="secondary-tools">\n'+(null!=(o=u(t,"if").call(i,null!=l?u(l,"displayOrganizeLink"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:11,column:2},end:{line:15,column:9}}}))?o:"")+"\t\t"+r((u(t,"outlet")||l&&u(l,"outlet")||s).call(i,null!=l?u(l,"fluid-magic-search-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:16,column:2},end:{line:16,column:36}}}))+"\n\t\t"+r((u(t,"outlet")||l&&u(l,"outlet")||s).call(i,null!=l?u(l,"fluid-magic-slideshow-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:17,column:2},end:{line:17,column:39}}}))+"\n"+(null!=(o=u(t,"if").call(i,null!=l?u(l,"shareView"):l,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.noop,data:a,loc:{start:{line:18,column:2},end:{line:22,column:9}}}))?o:"")+"\n"+(null!=(o=u(t,"if").call(i,null!=l?u(l,"displayLayouts"):l,{name:"if",hash:{},fn:n.program(9,a,0),inverse:n.noop,data:a,loc:{start:{line:24,column:2},end:{line:32,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),e={};n.Array.each([],(function(l){var t=n.Template.get("hermes/"+l);t&&(e[l]=t)})),n.Template.register("hermes/fluid-magic-tools",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,t(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-magic-tools-view",(function(e){e.namespace("Views")[this.name]=e.Base.create("fluid-magic-tools-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.set("selected",""),this.set("isEmptyPage",e.isEmptyPage),e.subnavConfig&&e.subnavConfig.selected&&this.set("selected",e.subnavConfig.selected),this.ownerNsid=e.nsid,this.page=e.pageParams&&e.pageParams.nominalPage,this},loadState:function(){var e=this,t=[],i=this.appContext.getViewer();return t.push(this.appContext.getModel("person-models",this.ownerNsid).then((function(t){e.set("personModel",t)}))),i.signedIn&&t.push(this.appContext.getModel("person-preferences-models",i.nsid).then((t=>{e.prefsModel=t,i.nsid===this.ownerNsid&&(this.layoutPref=t.getValue("photostreamViewLayoutPref"))}))),Promise.all(t)},subviewConfig:{"fluid-share-photostream-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,parentViewName:this.name,disabled:function(e){return"photostream"!==this.get("selected")}},"fluid-share-favorites-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,parentViewName:this.name,disabled:function(e){return"favorites"!==this.get("selected")}},"photostream-filter-tools-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return"photostream"!==this.get("selected")||!this.appContext.getViewer().signedIn},additionalViewClasses:["primary-tools"]},"fluid-magic-search-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!!this.get("isEmptyPage")}},"fluid-magic-slideshow-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disabled:function(){return!!this.get("isEmptyPage")}}},buildContainer:function(){var t,i=this.appContext.getViewer(),s=i.signedIn&&i.nsid===this.ownerNsid,o=(e.URLHelper.generatePersonUrls(this.get("personModel")),this.appContext.viewportData.getWidth()<=700),r="photostream"===this.get("selected")&&s&&!this.get("isEmptyPage"),n=r;return this.hasLayouts=r&&!!this.layoutPref,t={shareView:this.getShareViewContainer(),displayOrganizeLink:n,showSortAndFilterLink:s&&o,displayLayouts:this.hasLayouts,layoutPref:this.layoutPref},this.setContainerWithTemplate("fluid-magic-tools",t),this},activate:function(){var e=this.get("container");return this.sortAndFilterButton=e.one(".sort-and-filter-button"),this.justifiedLayoutButton=e.one(".layout-button.justified"),this.cardLayoutButton=e.one(".layout-button.card"),this.sortAndFilterButton&&this.registerEventHandler(this.sortAndFilterButton.on("click",this.handleSortAndFilterButtonClick.bind(this))),this.justifiedLayoutButton&&this.cardLayoutButton&&this.registerEventHandler(e.delegate("click",(e=>{e.target.ancestor(".justified",!0)?(this.layoutPref="justified",this.justifiedLayoutButton.addClass("selected"),this.cardLayoutButton.removeClass("selected")):e.target.ancestor(".card",!0)&&(this.layoutPref="card",this.cardLayoutButton.addClass("selected"),this.justifiedLayoutButton.removeClass("selected")),this.fire("layoutSelected",{layoutPref:this.layoutPref})}),".layout-button")),this},handleSortAndFilterButtonClick:function(t){new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["photostream-filters-list-view"]({appContext:this.appContext,nsid:this.ownerNsid}),hasSubviewConfigRefactor:!0}).show()},getShareViewContainer:function(){var e="";return this.subviews["fluid-share-"+this.get("selected")+"-view"]&&(e=this.subviews["fluid-share-"+this.get("selected")+"-view"].get("container")),e}})}),"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","fluid-share-photostream-view","fluid-share-favorites-view","fluid-magic-slideshow-view","photostream-filter-tools-view","photostream-filters-list-view","hermes-template-fluid-magic-tools"],langBundles:["share-modal","common","photostream","filter-bar"]});YUI.add("hermes-lang-photostream",(function(e,a){e.Intl.add("hermes/photostream","en-US",{EDIT_CAMERAROLL_ORGANIZR:[{type:0,value:'Edit in <a href="'},{type:1,value:"camerarollUrl"},{type:0,value:'">Camera Roll</a> or <a href="'},{type:1,value:"organizrUrl"},{type:0,value:'">Organizr</a>'}],EDIT_PHOTO_INFO:[{type:0,value:"Edit photo info"}]})}),"@VERSION@",{requires:["intl"]});